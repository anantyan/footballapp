!function(){function e(e){return Array.prototype.slice.call(e)}function t(e){return new Promise(((t,o)=>{e.onsuccess=function(){t(e.result)},e.onerror=function(){o(e.error)}}))}function o(e,o,n){let r;const i=new Promise(((i,s)=>{r=e[o].apply(e,n),t(r).then(i,s)}));return i.request=r,i}function n(e,t,n){const r=o(e,t,n);return r.then((e=>{if(e)return new p(e,r.request)}))}function r(e,t,o){o.forEach((o=>{Object.defineProperty(e.prototype,o,{get(){return this[t][o]},set(e){this[t][o]=e}})}))}function i(e,t,n,r){r.forEach((r=>{r in n.prototype&&(e.prototype[r]=function(){return o(this[t],r,arguments)})}))}function s(e,t,o,n){n.forEach((n=>{n in o.prototype&&(e.prototype[n]=function(){return this[t][n].apply(this[t],arguments)})}))}function u(e,t,o,r){r.forEach((r=>{r in o.prototype&&(e.prototype[r]=function(){return n(this[t],r,arguments)})}))}function c(e){this._index=e}function p(e,t){this._cursor=e,this._request=t}function a(e){this._store=e}function l(e){this._tx=e,this.complete=new Promise(((t,o)=>{e.oncomplete=function(){t()},e.onerror=function(){o(e.error)},e.onabort=function(){o(e.error)}}))}function d(e,t,o){this._db=e,this.oldVersion=t,this.transaction=new l(o)}function f(e){this._db=e}r(c,"_index",["name","keyPath","multiEntry","unique"]),i(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),r(p,"_cursor",["direction","key","primaryKey","value"]),i(p,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((e=>{e in IDBCursor.prototype&&(p.prototype[e]=function(){const o=this,n=arguments;return Promise.resolve().then((()=>(o._cursor[e].apply(o._cursor,n),t(o._request).then((e=>{if(e)return new p(e,o._request)})))))})})),a.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},a.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},r(a,"_store",["name","keyPath","indexNames","autoIncrement"]),i(a,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(a,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(a,"_store",IDBObjectStore,["deleteIndex"]),l.prototype.objectStore=function(){return new a(this._tx.objectStore.apply(this._tx,arguments))},r(l,"_tx",["objectStoreNames","mode"]),s(l,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new a(this._db.createObjectStore.apply(this._db,arguments))},r(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new l(this._db.transaction.apply(this._db,arguments))},r(f,"_db",["name","version","objectStoreNames"]),s(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((t=>{[a,c].forEach((o=>{t in o.prototype&&(o.prototype[t.replace("open","iterate")]=function(){const o=e(arguments),n=o[o.length-1],r=this._store||this._index,i=r[t].apply(r,o.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[c,a].forEach((e=>{e.prototype.getAll||(e.prototype.getAll=function(e,t){const o=this,n=[];return new Promise((r=>{o.iterateCursor(e,(e=>{e?(n.push(e.value),void 0===t||n.length!=t?e.continue():r(n)):r(n)}))}))})}));const h={open(e,t,n){const r=o(indexedDB,"open",[e,t]),{request:i}=r;return i&&(i.onupgradeneeded=function(e){n&&n(new d(i.result,e.oldVersion,i.transaction))}),r.then((e=>new f(e)))},delete:e=>o(indexedDB,"deleteDatabase",[e])};"undefined"!=typeof module?(module.exports=h,module.exports.default=module.exports):self.idb=h}();